(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();const e={mode:"pomodoro",timeLeft:0,isRunning:!1,intervalId:null,completedPomodoros:0,durations:{pomodoro:25,short:5,long:15}},c="/pomodoro-app/symbol-defs.svg",b=document.querySelector(".timer");function u(){let o=Math.floor(e.timeLeft/60),t=e.timeLeft%60;b!==null&&(b.textContent=`${String(o).padStart(2,"0")}:${String(t).padStart(2,"0")}`)}function q(o){return String(o).padStart(2,"0")}class x{root;mode;btn;valueEl;list;options;isOpen=!1;onChange;constructor(t,s){this.root=t,this.onChange=s;const n=this.root.closest(".duration-row");if(!n?.dataset.mode)throw new Error("Combobox: missing parent .duration-row[data-mode]");this.mode=n.dataset.mode;const i=this.root.querySelector(".combo__button"),r=i?.querySelector(".combo__value"),a=this.root.querySelector(".combo__list");if(!i||!r||!a)throw new Error("Combobox: missing required elements");this.btn=i,this.valueEl=r,this.list=a,this.options=Array.from(this.list.querySelectorAll(".combo__option")),this.options.forEach(I=>I.setAttribute("tabindex","-1")),this.syncSelected(),this.attach()}attach(){this.btn.addEventListener("click",()=>this.toggle()),this.btn.addEventListener("keydown",t=>{if(t.key==="ArrowDown"||t.key==="ArrowUp"){t.preventDefault(),this.open();const s=this.indexOfCurrent();this.focusOption(s>=0?s:0)}else t.key==="Enter"||t.key===" "?(t.preventDefault(),this.toggle()):t.key==="Escape"&&this.close()}),this.options.forEach((t,s)=>{t.addEventListener("click",()=>{const n=Number(t.dataset.value??t.textContent??0);this.select(n),this.close(),this.btn.focus()}),t.addEventListener("keydown",n=>{n.key==="ArrowDown"?(n.preventDefault(),this.focusOption(Math.min(s+1,this.options.length-1))):n.key==="ArrowUp"?(n.preventDefault(),this.focusOption(Math.max(s-1,0))):n.key==="Enter"||n.key===" "?(n.preventDefault(),t.click()):n.key==="Escape"&&(n.preventDefault(),this.close(),this.btn.focus())})}),document.addEventListener("mousedown",t=>{this.root.contains(t.target)||this.close()})}open(){this.isOpen||(this.isOpen=!0,this.list.hidden=!1,this.btn.setAttribute("aria-expanded","true"))}close(){this.isOpen&&(this.isOpen=!1,this.list.hidden=!0,this.btn.setAttribute("aria-expanded","false"))}toggle(){this.isOpen?this.close():this.open()}indexOfCurrent(){const t=String(this.value());return this.options.findIndex(s=>(s.dataset.value??s.textContent)===t)}focusOption(t){this.options[t]?.focus()}syncSelected(){const t=this.value();this.options.forEach(n=>n.removeAttribute("aria-selected"));const s=this.options.find(n=>Number(n.dataset.value??n.textContent??0)===t);s&&s.setAttribute("aria-selected","true")}setVisualValue(t){this.valueEl.dataset.value=String(t),this.valueEl.textContent=q(t),this.syncSelected()}select(t){const s=Math.round(t);this.setVisualValue(s),this.onChange({mode:this.mode,value:s})}value(){return Number(this.valueEl.dataset.value??this.valueEl.textContent??0)}}function O(o){document.querySelectorAll(".combo").forEach(t=>{new x(t,o)})}let g={...e.durations};const k=()=>{O(({mode:o,value:t})=>{g[o]=t})};k();const h=document.querySelector(".home"),f=document.querySelector(".settings"),y=document.querySelector(".icon-home"),S=document.querySelector(".icon-settings"),E=document.body,w=document.querySelector('.close-btn[data-action="close"]'),C=document.querySelector('.submit-btn[data-action="save"]');let m=!1;const $=()=>{m=e.isRunning,E.classList.add("modal-open"),f?.classList.add("btn-active"),S?.setAttribute("href",`${c}#icon-Setting-2`),y?.setAttribute("href",`${c}#icon-Home-1`),h?.classList.remove("btn-active"),A()},p=()=>{E.classList.remove("modal-open"),f?.classList.remove("btn-active"),S?.setAttribute("href",`${c}#icon-Setting`),y?.setAttribute("href",`${c}#icon-Home-2`),h?.classList.add("btn-active")},L=()=>{const o=e.durations,t=g,s=o.pomodoro!==t.pomodoro,n=o.short!==t.short,i=o.long!==t.long;(s||n||i)&&(e.durations={...t},(e.mode==="pomodoro"&&s||e.mode==="short"&&n||e.mode==="long"&&i)&&(e.timeLeft=e.durations[e.mode]*60),u()),p(),m&&v(),m=!1};f?.addEventListener("click",$);h?.addEventListener("click",p);w?.addEventListener("click",p);C?.addEventListener("click",L);function P(o){document.querySelectorAll(".mode-item").forEach(s=>s.classList.remove("isActive")),document.querySelector(`.mode-item[data-mode="${o}"]`)?.classList.add("isActive")}const l=o=>{e.intervalId!==null&&(clearInterval(e.intervalId),e.isRunning=!1),e.mode=o,e.timeLeft=e.durations[o]*60,P(o),u()},D=()=>{let o=e.mode;if(o==="pomodoro"){e.completedPomodoros+=1;const t=e.completedPomodoros%4===0?"long":"short";return l(t),!0}else return o==="short"?(l("pomodoro"),!0):(l("pomodoro"),!1)},R=document.querySelector(".start"),M=document.getElementById("reset"),d=document.getElementById("btn"),_=document.querySelector(".icon-home"),B=document.querySelector(".home"),N=Array.from(document.querySelectorAll(".mode-item")),A=()=>{if(e.intervalId!=null){clearInterval(e.intervalId),e.intervalId=null,e.isRunning=!1,d?.setAttribute("href",`${c}#icon-Play`);return}},v=()=>{if(e.isRunning){A();return}e.isRunning=!0,d?.setAttribute("href",`${c}#icon-pause`),L(),e.intervalId=setInterval(()=>{if(e.timeLeft--,e.intervalId!==null&&e.timeLeft<=0){clearInterval(e.intervalId),e.intervalId=null,e.isRunning=!1,D()?v():d?.setAttribute("href",`${c}#icon-Play`);return}u()},1e3)},T=()=>{e.intervalId!==null&&(clearInterval(e.intervalId),e.intervalId=null),e.isRunning=!1,e.timeLeft=e.durations.pomodoro*60,e.completedPomodoros=0,d?.setAttribute("href",`${c}#icon-Play`),u()};M?.addEventListener("click",T);function H(){l(e.mode),N.forEach(o=>{o.addEventListener("click",()=>{const t=o.dataset.mode??"pomodoro";l(t)})}),_?.setAttribute("href",`${c}#icon-Home-2`),B?.classList.add("btn-active"),R?.addEventListener("click",v)}H();
